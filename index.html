<script>
        let allGames = [];
        // Aseg√∫rate de que este nombre sea EXACTO al de tu archivo subido
        const csvFile = "Inventario_JuegosRetro - Juegos.csv";

        Papa.parse(csvFile, {
            download: true, 
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                // Limpiamos los datos para evitar errores de columnas desplazadas
                allGames = results.data.filter(j => j["Juego"] && j["Juego"] !== "TRUE" && j["Juego"] !== "FALSE");
                renderGames(allGames);
            }
        });

        function renderGames(games) {
            let html = "";
            games.forEach(j => {
                // Usamos corchetes para asegurar que lea bien los nombres con espacios o tildes
                const nombreJuego = j["Juego"];
                const plataforma = j["Plataforma"];
                const region = j["Regi√≥n"];
                const estadoCaja = j["Estado Caja"];
                const estadoManual = j["Estado Manual"];
                const tasacion = j["Tasaci√≥n Actual"];

                html += `
                    <div class="card">
                        <span class="platform-tag">${plataforma}</span>
                        <span class="game-title">${nombreJuego}</span>
                        <div class="info-row">
                            <span>üåç ${region}</span>
                            <span>üì¶ ${estadoCaja}/10 | üìñ ${estadoManual}/10</span>
                        </div>
                        <span class="price-tag">Tasaci√≥n: ${tasacion || 'S/T'}</span>
                    </div>
                `;
            });
            document.getElementById('game-grid').innerHTML = html;
        }

        function filterGames() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allGames.filter(j => 
                (j["Juego"] && j["Juego"].toLowerCase().includes(query)) || 
                (j["Plataforma"] && j["Plataforma"].toLowerCase().includes(query))
            );
            renderGames(filtered);
        }
    </script>
